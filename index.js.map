{"version":3,"file":"index.js","sources":["../src/js/slider-feedbacks.js","../src/js/slider-hero.js","../src/js/constants.js","../src/js/api-service.js","../src/js/render-functions.js","../src/js/refs.js","../src/js/helpers.js","../src/js/storage.js","../src/js/handlers.js","../src/js/books-data.js","../src/js/books.js","../src/js/join-form.js","../src/js/scrolling.js","../src/js/scroll-top.js"],"sourcesContent":["import Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\nimport {\n  Navigation,\n  Pagination,\n  A11y,\n  Keyboard,\n  Mousewheel,\n} from 'swiper/modules';\n\nSwiper.use([Navigation, Pagination, A11y, Keyboard, Mousewheel]);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const swiperElement = document.querySelector('.feedbacks-slider');\n\n  if (!swiperElement) {\n    console.error('Swiper: Контейнер .feedbacks-slider не знайдено.');\n    return;\n  }\n\n  const swiper = new Swiper(swiperElement, {\n    slidesPerView: 1,\n    spaceBetween: 24,\n    watchOverflow: true,\n\n    navigation: {\n      nextEl: '.swiper-arrows .swiper-button-next',\n      prevEl: '.swiper-arrows .swiper-button-prev',\n    },\n    pagination: {\n      el: '.carousel-navigation .swiper-pagination',\n      clickable: true,\n    },\n    a11y: {\n      enabled: true,\n    },\n    keyboard: {\n      enabled: true,\n    },\n    mousewheel: {\n      enabled: true,\n      forceToAxis: true,\n    },\n\n    breakpoints: {\n      320: {\n        slidesPerView: 1,\n        spaceBetween: 24,\n      },\n      768: {\n        slidesPerView: 2,\n        spaceBetween: 32,\n      },\n      1440: {\n        slidesPerView: 3,\n        spaceBetween: 32,\n      },\n    },\n  });\n});\n","// import Swiper bundle with all modules installed\r\nimport Swiper from 'swiper/bundle';\r\n\r\n// import styles bundle\r\nimport 'swiper/css/bundle';\r\n\r\n// init Swiper:\r\nvar swiper = new Swiper('.heroSwiper', {\r\n  cssMode: true,\r\n  navigation: {\r\n    nextEl: '.swiper-button-next',\r\n    prevEl: '.swiper-button-prev',\r\n  },\r\n  keyboard: true,\r\n});\r\n","\nexport const BOOKS_BASE_URL = 'https://books-backend.p.goit.global';\nexport const REQUEST_TIMEOUT = 10000;\nexport const RETRY_ATTEMPTS = 3;\nexport const RETRY_DELAY = 1000;\n\n// UI/логіка\nexport const BOOKS_CONFIG = {\n  initialPerPageMobile: 10,\n  initialPerPageDesktop: 24,\n  perLoadMore: 4,\n  mobileBreakpoint: 768,\n  tabletBreakpoint: 1024,\n};\n\n// Cache\nexport const CACHE_CONFIG = {\n  maxSize: 50,\n  ttl: 5 * 60 * 1000,\n};\n\n// Фолбек-категорії\nexport const FALLBACK_CATEGORIES = [\n  'Hardcover Fiction','Hardcover Nonfiction','Trade Fiction Paperback','Mass Market Monthly',\n  'Paperback Trade Fiction','Paperback Nonfiction','E-Book Fiction','E-Book Nonfiction',\n  'Hardcover Advice','Paperback Advice','Advice How-To and Miscellaneous',\n  \"Children's Middle Grade Hardcover\",'Picture Books','Series Books','Young Adult Hardcover',\n  'Audio Fiction','Audio Nonfiction','Business Books','Graphic Books and Manga',\n  'Mass Market','Middle Grade Paperback','Young Adult Paperback',\n];\n\n// ID елементів у DOM\nexport const DOM_ELEMENTS = {\n  booksGrid: 'books-grid',\n  booksLoader: 'books-loader',\n  showMoreBtn: 'show-more-btn',\n  categoriesList: 'categories-list',\n  categoriesLoader: 'categories-loader',\n  booksError: 'books-error',\n  booksCounter: 'books-counter-text',\n  categoriesSelectTablet: 'categories-select-tablet',\n  categoriesSelectMobile: 'categories-select-mobile',\n};\n\n// для екранування\nexport const HTML_ESCAPE_MAP = { '&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',\"'\":'&#039;' };\n\n// -----footer-----\nexport const STORAGE_KEYS = {\n  EMAILS: 'emails',\n};\n\nexport const TOAST_DELAY = 3000;\n\nexport const MESSAGES = {\n  REQUIRED: '* Required field',\n  INVALID: 'Please enter a valid email',\n  SUCCESS: 'Email saved!',\n};\n// -----footer-end-----","import {\n  BOOKS_BASE_URL, REQUEST_TIMEOUT, RETRY_ATTEMPTS, RETRY_DELAY,\n  FALLBACK_CATEGORIES, CACHE_CONFIG\n} from './constants.js';\n\nasync function fetchJSON(path, options = {}) {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), REQUEST_TIMEOUT);\n  let lastError = null;\n\n  for (let attempt = 1; attempt <= RETRY_ATTEMPTS; attempt++) {\n    try {\n      const res = await fetch(`${BOOKS_BASE_URL}${path}`, {\n        signal: controller.signal,\n        headers: { 'Content-Type':'application/json', 'Accept':'application/json' },\n        ...options,\n      });\n      clearTimeout(timeoutId);\n      if (!res.ok) {\n        const txt = await res.text().catch(()=>'');\n        throw new Error(`API ${res.status}: ${res.statusText}. ${txt}`);\n      }\n      return await res.json();\n    } catch (err) {\n      lastError = err;\n      if (err.name === 'AbortError') throw new Error('Request timeout. Please check your connection.');\n      if (attempt === RETRY_ATTEMPTS) throw lastError;\n      await new Promise(r => setTimeout(r, RETRY_DELAY * attempt));\n    }\n  }\n}\n\nfunction normalizeBook(b, fallbackImage = '') {\n  return {\n    id: b.primary_isbn13 || b.primary_isbn10 || b.title || 'no-id',\n    title: b.title || 'Untitled',\n    author: b.author || 'Unknown Author',\n    image: b.book_image || fallbackImage,\n    amazon_product_url: b.amazon_product_url || '#',\n    price: b.price || '',\n  };\n}\n\nclass MemoryCache {\n  constructor(maxSize = CACHE_CONFIG.maxSize, ttl = CACHE_CONFIG.ttl) {\n    this.cache = new Map(); this.maxSize = maxSize; this.ttl = ttl;\n  }\n  set(key, value) {\n    if (this.cache.size >= this.maxSize) this.cache.delete(this.cache.keys().next().value);\n    this.cache.set(key, { value, t: Date.now() });\n  }\n  get(key) {\n    const item = this.cache.get(key); if (!item) return null;\n    if (Date.now() - item.t > this.ttl) { this.cache.delete(key); return null; }\n    return item.value;\n  }\n  clear(){ this.cache.clear(); }\n}\n\nclass BooksAPI {\n  constructor(){ this.cache = new MemoryCache(); }\n\n  async getCategories() {\n    const k = 'categories'; const cached = this.cache.get(k); if (cached) return cached;\n    try {\n      const data = await fetchJSON('/books/category-list');\n      let categories = [];\n      if (data && Array.isArray(data.results)) {\n        categories = data.results.map(c => {\n          if (typeof c === 'object' && c.list_name) return { name: c.list_name, value: c.list_name };\n          if (typeof c === 'string') return { name: c, value: c };\n          return null;\n        }).filter(Boolean);\n      }\n      if (!categories.length) categories = FALLBACK_CATEGORIES.map(n => ({ name:n, value:n }));\n      const result = [{ name:'All Categories', value:'all' }, ...categories];\n      this.cache.set(k, result); return result;\n    } catch {\n      return [{ name:'All Categories', value:'all' }, ...FALLBACK_CATEGORIES.map(n=>({name:n,value:n}))];\n    }\n  }\n\n  async getBooks(category='all', page=1, limit=20) {\n    const k = `books_${category}_${page}_${limit}`; const cached = this.cache.get(k); if (cached) return cached;\n    try {\n      let endpoint = '/books/top-books';\n      if (category !== 'all') endpoint = `/books/category?category=${encodeURIComponent(category)}`;\n      const data = await fetchJSON(endpoint);\n      let all = [];\n      if (data?.results?.length) all = data.results.map(normalizeBook);\n      else if (Array.isArray(data)) all = data.map(normalizeBook);\n\n      const start = (page-1)*limit, end = start+limit;\n      const result = {\n        books: all.slice(start, end),\n        total: all.length,\n        showing: Math.min(end, all.length),\n        hasMore: end < all.length,\n        currentPage: page,\n      };\n      this.cache.set(k, result); return result;\n    } catch (e) { throw new Error(`Failed to load books: ${e.message}`); }\n  }\n}\n\nexport { fetchJSON, normalizeBook, MemoryCache };\nexport const api = new BooksAPI();","import { HTML_ESCAPE_MAP } from './constants.js';\n\nexport function escapeHtml(text) {\n  if (!text) return '';\n  return String(text).replace(/[&<>\"']/g, m => HTML_ESCAPE_MAP[m]);\n}\n\nexport function createBookCard(book, index = 0) {\n  const li = document.createElement('li');\n  li.className = 'book-card';\n  li.style.animationDelay = `${(index % 8) * 0.05 + 0.1}s`;\n\n  const priceText = book.price && book.price !== '$0' ? book.price : '';\n\n  li.innerHTML = `\n    <div class=\"book-media\">\n      <img\n        class=\"book-cover loading\"\n        src=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='227' height='323'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3C/svg%3E\"\n        ${book.image ? `data-src=\"${book.image}\"` : ''}\n        alt=\"${escapeHtml(book.title)}\"\n        loading=\"lazy\"\n      >\n    </div>\n    <div class=\"book-info\">\n      <div class=\"book-title-row\">\n        <h3 class=\"book-title\">${escapeHtml(book.title)}</h3>\n        ${priceText ? `<span class=\"book-price\">${escapeHtml(priceText)}</span>` : ''}\n      </div>\n      <p class=\"book-author\">${escapeHtml(book.author)}</p>\n    </div>\n    <div class=\"book-footer\">\n      <button\n        class=\"learn-more-btn\"\n        type=\"button\"\n        data-book-id=\"${escapeHtml(book.id)}\"\n        data-amazon-url=\"${escapeHtml(book.amazon_product_url)}\"\n      >\n        Learn More\n      </button>\n    </div>\n  `;\n  return li;\n}\n\nexport function createCategoryItem(name, value, isActive) {\n  return `\n    <li class=\"category-item ${isActive ? 'active' : ''}\" data-category=\"${escapeHtml(value)}\">\n      <button class=\"category-button\" type=\"button\" data-category=\"${escapeHtml(value)}\">\n        ${escapeHtml(name)}\n      </button>\n    </li>\n  `;\n}\n\nexport function renderCategories(container, categories, activeCategory = 'all') {\n  if (!container) return;\n  container.innerHTML = categories\n    .map(c => createCategoryItem(c.name, c.value, c.value === activeCategory))\n    .join('');\n}\n\nexport function populateDropdowns(dropdowns, categories, activeCategory = 'all') {\n  dropdowns.forEach(select => {\n    if (!select) return;\n    select.innerHTML = categories\n      .map(\n        c => `<option value=\"${escapeHtml(c.value)}\" ${c.value === activeCategory ? 'selected' : ''}>\n          ${escapeHtml(c.name)}\n        </option>`\n      )\n      .join('');\n  });\n}\n\nexport function renderBooks(container, books) {\n  if (!container) return;\n  container.innerHTML = '';\n  books?.forEach((b, i) => container.appendChild(createBookCard(b, i)));\n}\n\nexport function appendBooks(container, books) {\n  if (!container || !books?.length) return;\n  const start = container.children.length;\n  books.forEach((b, i) => container.appendChild(createBookCard(b, start + i)));\n}\n\nexport function updateBooksCounter(counter, showing, total) {\n  if (counter) counter.textContent = `Showing ${showing} of ${total}`;\n}\n\nexport function updateShowMoreButton(button, hasMore, isLoading) {\n  if (!button) return;\n  const text = button.querySelector('.button-text');\n  if (!text) return;\n\n  if (isLoading) {\n    text.textContent = 'Loading...';\n    button.disabled = true;\n  } else if (hasMore) {\n    text.textContent = 'Show More';\n    button.disabled = false;\n    button.style.display = 'block';\n  } else {\n    button.style.display = 'none';\n  }\n}\n\nexport function showError(errorElement, message) {\n  if (!errorElement) return;\n  const messageElement = errorElement.querySelector('.error-message');\n  if (messageElement) messageElement.textContent = message;\n  errorElement.style.display = 'block';\n}\n\nexport function hideError(errorElement) {\n  if (errorElement) errorElement.style.display = 'none';\n}\n\nexport function setLoading(loader, listEl, isLoading) {\n  loader?.classList.toggle('hidden', !isLoading);\n  listEl?.setAttribute('aria-busy', String(isLoading));\n}\n\nexport function setCategoriesLoading(loader, isLoading) {\n  loader?.classList.toggle('hidden', !isLoading);\n}\n\nexport function updateCategoriesActiveState(container, activeCategory) {\n  if (!container) return;\n  container.querySelectorAll('.category-item').forEach(li => {\n    li.classList.toggle('active', li.dataset.category === activeCategory);\n  });\n}","export default {\n  elBtnOpenModal: document.getElementById('open-modal-btn'), \n}; \n\n// -----footer-----\nexport const refs = {\n  footerForm: document.querySelector('.footer-input-box'),\n  footerInput: document.querySelector('.footer-input'),\n  footerRemark: document.querySelector('.footer-remark'),\n  footerBtn: document.querySelector('.footer-btn'),\n};\n// -----footer-end-----\n\n","\n// -----footer-----\nexport function validateEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n}\n// -----footer-end-----","\n// -----footer-----\nimport { STORAGE_KEYS } from './constants.js';\n\nexport function saveEmailToLocal(email) {\n  const emails = JSON.parse(localStorage.getItem(STORAGE_KEYS.EMAILS)) || [];\n  if (!emails.includes(email)) {\n    emails.push(email);\n    localStorage.setItem(STORAGE_KEYS.EMAILS, JSON.stringify(emails));\n  }\n}\n\nexport function getEmailsFromLocal() {\n  return JSON.parse(localStorage.getItem(STORAGE_KEYS.EMAILS)) || [];\n}\n// -----footer-end-----","export function createShowMoreHandler(section){ return ()=>section.loadMore(); }\n\nexport function createBookClickHandler(){\n  return e => {\n    const btn = e.target.closest('.learn-more-btn'); if (!btn) return;\n    e.preventDefault(); const url = btn.dataset.amazonUrl;\n    if (url && url !== '#') window.open(url,'_blank','noopener,noreferrer');\n  };\n}\n\nexport function createResizeHandler(section){\n  return () => {\n    if (section.debounceTimeout) clearTimeout(section.debounceTimeout);\n    section.debounceTimeout = setTimeout(() => {\n      const cards = section.elements.booksGrid?.querySelectorAll('.book-card') ?? [];\n      cards.forEach((card,i)=>card.style.animationDelay = `${(i % 8)*0.05 + 0.1}s`);\n    }, 250);\n  };\n}\n\nexport function createCategoryChangeHandler(section){ return e => section.filterByCategory(e.target.value); }\n\nexport function createCategoryButtonHandler(section){\n  return e => {\n    const li = e.currentTarget.closest('.category-item');\n    const cat = li?.dataset.category;\n    if (cat && cat !== section.currentCategory) section.filterByCategory(cat);\n  };\n}\n\nexport function createRetryHandler(section){ return ()=>section.loadBooks(true); }\n\nexport function createIntersectionObserver(onLoad){\n  return new IntersectionObserver(entries => {\n    entries.forEach(entry => { if (entry.isIntersecting) onLoad(entry.target); });\n  }, { rootMargin: '50px 0px' });\n}\n\nexport function loadImage(img, observer){\n  const src = img.dataset.src; if(!src) return;\n  img.classList.add('loading');\n  const t = new Image();\n  t.onload = () => { img.src = src; img.classList.remove('loading'); img.classList.add('loaded'); delete img.dataset.src; observer?.unobserve(img); };\n  t.onerror = () => { img.classList.remove('loading'); img.classList.add('error'); observer?.unobserve(img); };\n  t.src = src;\n}\n\n// -----footer-----\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { refs } from './refs.js';\nimport { validateEmail } from './helpers.js';\nimport { TOAST_DELAY, MESSAGES } from './constants.js';\nimport { saveEmailToLocal } from './storage.js';\n\nfunction showToast(type, title, message) {\n  iziToast[type]({\n    title,\n    message,\n    position: 'topRight',\n  });\n}\n\nexport function onFooterSubmit(e) {\n  e.preventDefault();\n\n  const email = refs.footerInput.value.trim();\n\n  refs.footerBtn.classList.remove('btn-error', 'btn-success');\n  refs.footerRemark.classList.remove('remark-error', 'remark-success');\n\n  if (!email) {\n    refs.footerRemark.textContent = MESSAGES.REQUIRED;\n    refs.footerRemark.classList.add('remark-error');\n    showToast('warning', 'Caution', MESSAGES.REQUIRED);\n    setTimeout(clearFormState, TOAST_DELAY);\n    return;\n  }\n\n  if (!validateEmail(email)) {\n    refs.footerRemark.textContent = MESSAGES.INVALID;\n    refs.footerRemark.classList.add('remark-error');\n    refs.footerBtn.classList.add('btn-error');\n    showToast('error', 'Error', MESSAGES.INVALID);\n    setTimeout(clearFormState, TOAST_DELAY);\n    return;\n  }\n\n  refs.footerRemark.textContent = '✅ ' + MESSAGES.SUCCESS;\n  refs.footerRemark.classList.add('remark-success');\n  refs.footerBtn.classList.add('btn-success');\n  showToast('success', 'OK', MESSAGES.SUCCESS);\n\n  saveEmailToLocal(email);\n\n  setTimeout(clearFormState, TOAST_DELAY);\n  refs.footerForm.reset();\n}\n\nfunction clearFormState() {\n  refs.footerRemark.textContent = '';\n  refs.footerRemark.classList.remove('remark-error', 'remark-success');\n  refs.footerBtn.classList.remove('btn-error', 'btn-success');\n}\n// -----footer-end-----","import { api } from './api-service.js';\nimport { DOM_ELEMENTS, BOOKS_CONFIG } from './constants.js';\nimport {\n  renderCategories, populateDropdowns, renderBooks, appendBooks,\n  updateBooksCounter, updateShowMoreButton, showError, hideError,\n  setLoading, setCategoriesLoading, updateCategoriesActiveState\n} from './render-functions.js';\nimport {\n  createShowMoreHandler, createBookClickHandler, createResizeHandler,\n  createCategoryChangeHandler, createCategoryButtonHandler,\n  createRetryHandler, createIntersectionObserver, loadImage\n} from './handlers.js';\n\nclass BooksSection {\n  constructor(){\n    this.elements = {\n      booksGrid: document.getElementById(DOM_ELEMENTS.booksGrid),\n      booksLoader: document.getElementById(DOM_ELEMENTS.booksLoader),\n      showMoreBtn: document.getElementById(DOM_ELEMENTS.showMoreBtn),\n      categoriesUL: document.getElementById(DOM_ELEMENTS.categoriesList),\n      categoriesLoader: document.getElementById(DOM_ELEMENTS.categoriesLoader),\n      errorElement: document.getElementById(DOM_ELEMENTS.booksError),\n      booksCounter: document.getElementById(DOM_ELEMENTS.booksCounter),\n      categoriesSelectTablet: document.getElementById(DOM_ELEMENTS.categoriesSelectTablet),\n      categoriesSelectMobile: document.getElementById(DOM_ELEMENTS.categoriesSelectMobile),\n    };\n    this.currentCategory = 'all';\n    this.currentPage = 1;\n    this.isLoading = false;\n    this.hasMore = true;\n    this.loadedBooks = [];\n    this.imageObserver = null;\n    this.debounceTimeout = null;\n    this.init();\n  }\n\n  async init(){\n    try {\n      hideError(this.elements.errorElement);\n      this.setupEventListeners();\n      this.setupObservers();\n      await this.renderCategories();\n      await this.loadBooks(true);\n    } catch (e) {\n      console.error('Books init error:', e);\n      showError(this.elements.errorElement, 'Failed to load books. Please try again.');\n    }\n  }\n\n  setupEventListeners(){\n    this.elements.showMoreBtn?.addEventListener('click', createShowMoreHandler(this));\n    this.elements.booksGrid?.addEventListener('click', createBookClickHandler());\n    window.addEventListener('resize', createResizeHandler(this));\n    this.elements.categoriesSelectTablet?.addEventListener('change', createCategoryChangeHandler(this));\n    this.elements.categoriesSelectMobile?.addEventListener('change', createCategoryChangeHandler(this));\n    this.elements.errorElement?.querySelector('.retry-btn')?.addEventListener('click', createRetryHandler(this));\n  }\n\n  setupObservers(){\n    if ('IntersectionObserver' in window) {\n      this.imageObserver = createIntersectionObserver(img => loadImage(img, this.imageObserver));\n    }\n  }\n\n  async renderCategories(){\n    if (!this.elements.categoriesUL) return;\n    setCategoriesLoading(this.elements.categoriesLoader, true);\n    try {\n      const categories = await api.getCategories();\n      renderCategories(this.elements.categoriesUL, categories, this.currentCategory);\n      this.elements.categoriesUL.querySelectorAll('.category-button')\n        .forEach(btn => btn.addEventListener('click', createCategoryButtonHandler(this)));\n      populateDropdowns(\n        [this.elements.categoriesSelectTablet, this.elements.categoriesSelectMobile],\n        categories,\n        this.currentCategory\n      );\n    } finally {\n      setCategoriesLoading(this.elements.categoriesLoader, false);\n    }\n  }\n\n  async loadBooks(reset=false){\n    if (this.isLoading) return;\n    this.setLoading(true); hideError(this.elements.errorElement);\n    try {\n      const limit = reset ? this.getInitialBooksCount() : BOOKS_CONFIG.perLoadMore;\n      const page  = reset ? 1 : this.currentPage + 1;\n      const data = await api.getBooks(this.currentCategory, page, limit);\n\n      if (reset) { this.loadedBooks = [...data.books]; this.currentPage = 1; renderBooks(this.elements.booksGrid, this.loadedBooks); }\n      else { this.loadedBooks.push(...data.books); this.currentPage = page; appendBooks(this.elements.booksGrid, data.books); }\n\n      this.setupLazyLoading();\n      this.hasMore = data.hasMore;\n      this.updateShowMoreButton();\n      updateBooksCounter(this.elements.booksCounter, data.showing, data.total);\n    } catch (e) {\n      console.error('Load books error:', e);\n      showError(this.elements.errorElement, `Failed to load books: ${e.message}`);\n    } finally {\n      this.setLoading(false);\n    }\n  }\n\n  setupLazyLoading(){\n    if (!this.imageObserver) return;\n    this.elements.booksGrid?.querySelectorAll('.book-cover[data-src]')\n      .forEach(img => this.imageObserver.observe(img));\n  }\n\n  async filterByCategory(category){\n    if (category === this.currentCategory) return;\n    this.currentCategory = category;\n    this.currentPage = 1;\n    this.loadedBooks = [];\n    updateCategoriesActiveState(this.elements.categoriesUL, category);\n    if (this.elements.categoriesSelectTablet) this.elements.categoriesSelectTablet.value = category;\n    if (this.elements.categoriesSelectMobile) this.elements.categoriesSelectMobile.value = category;\n    await this.loadBooks(true);\n  }\n\n  async loadMore(){ if (!this.hasMore || this.isLoading) return; await this.loadBooks(false); }\n  updateShowMoreButton(){ updateShowMoreButton(this.elements.showMoreBtn, this.hasMore, this.isLoading); }\n  getInitialBooksCount(){ return window.innerWidth <= BOOKS_CONFIG.mobileBreakpoint ? BOOKS_CONFIG.initialPerPageMobile : BOOKS_CONFIG.initialPerPageDesktop; }\n  setLoading(v){ this.isLoading = v; setLoading(this.elements.booksLoader, this.elements.booksGrid, v); this.updateShowMoreButton(); }\n  destroy(){ this.imageObserver?.disconnect(); if (this.debounceTimeout) clearTimeout(this.debounceTimeout); }\n}\n\nexport default BooksSection;\n\n","import BooksSection from './books-data.js';\n\nfunction initBooks() {\n  const section = document.getElementById('books-section');\n  if (section) new BooksSection();\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initBooks);\n} else {\n  initBooks();\n}\n\n\n","import { refs } from './refs.js';\nimport { onFooterSubmit } from './handlers.js';\n\nrefs.footerForm.addEventListener('submit', onFooterSubmit);\n\n","document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n  anchor.addEventListener('click', function (e) {\n    e.preventDefault();\n\n    const target = document.querySelector(this.getAttribute('href'));\n    if (target) {\n      target.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center',\n        inline: 'center',\n      });\n    }\n  });\n});\n","\n\n    const scrollBtn = document.querySelector(\".scroll-top\");\n    const scrollTriggerPoint = document.querySelector(\".hero\");\n\n\n    function handleIntersection(entries) {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n            scrollBtn.classList.add('hidden') // Hide button\n        } else {\n            scrollBtn.classList.remove('hidden') // Show button\n        }\n      });\n    }\n\n    const observer = new IntersectionObserver(handleIntersection);\n    observer.observe(scrollTriggerPoint);\n\n    function scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n      });\n    }\n\n    scrollBtn.addEventListener(\"click\", scrollToTop);\n"],"names":["Swiper","Navigation","Pagination","A11y","Keyboard","Mousewheel","swiperElement","BOOKS_BASE_URL","REQUEST_TIMEOUT","RETRY_ATTEMPTS","RETRY_DELAY","BOOKS_CONFIG","CACHE_CONFIG","FALLBACK_CATEGORIES","DOM_ELEMENTS","HTML_ESCAPE_MAP","STORAGE_KEYS","TOAST_DELAY","MESSAGES","fetchJSON","path","options","controller","timeoutId","lastError","attempt","res","txt","err","r","normalizeBook","b","fallbackImage","MemoryCache","maxSize","ttl","key","value","item","BooksAPI","k","cached","data","categories","c","result","n","category","page","limit","endpoint","all","_a","start","end","e","api","escapeHtml","text","m","createBookCard","book","index","li","priceText","createCategoryItem","name","isActive","renderCategories","container","activeCategory","populateDropdowns","dropdowns","select","renderBooks","books","i","appendBooks","updateBooksCounter","counter","showing","total","updateShowMoreButton","button","hasMore","isLoading","showError","errorElement","message","messageElement","hideError","setLoading","loader","listEl","setCategoriesLoading","updateCategoriesActiveState","refs","validateEmail","email","saveEmailToLocal","emails","createShowMoreHandler","section","createBookClickHandler","btn","url","createResizeHandler","card","createCategoryChangeHandler","createCategoryButtonHandler","cat","createRetryHandler","createIntersectionObserver","onLoad","entries","entry","loadImage","img","observer","src","t","showToast","type","title","iziToast","onFooterSubmit","clearFormState","BooksSection","_b","_c","_d","_f","_e","reset","v","initBooks","anchor","target","scrollBtn","scrollTriggerPoint","handleIntersection","scrollToTop"],"mappings":"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"}