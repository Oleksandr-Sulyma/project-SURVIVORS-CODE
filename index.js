/* empty css                      */import{S as O,N as le,P as de,A as ue,K as me,M as he,a as Ae,i as R,b as Ie}from"./assets/vendor-Dt5eXX8r.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const h={navbar:document.querySelector("[data-navbar]"),burgerOpen:document.querySelector("[data-navbar-open]"),burgerClose:document.querySelector("[data-navbar-close]"),navbarLink:document.querySelector(".navbar-nav-list")};h.burgerOpen.addEventListener("click",fe);h.burgerClose.addEventListener("click",C);h.navbarLink.addEventListener("click",C);function fe(){h.navbar.classList.remove("is-close"),h.navbar.classList.add("is-open"),h.burgerOpen.setAttribute("aria-expanded","true"),document.body.classList.add("no-scroll"),h.burgerClose.addEventListener("click",C),h.navbarLink.addEventListener("click",be),window.addEventListener("keydown",ge)}function C(){h.navbar.classList.replace("is-open","is-close"),document.body.classList.remove("no-scroll"),h.burgerOpen.setAttribute("aria-expanded","false"),h.burgerClose.removeEventListener("click",C),h.navbarLink.removeEventListener("click",be),window.removeEventListener("keydown",ge)}function be(e){e.target.className!=="navbar-nav-list"&&C()}function ge(e){e.key==="Escape"&&C()}h.burgerOpen.addEventListener("click",fe);O.use([le,de,ue,me,he]);document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".feedbacks-slider");if(!e){console.error("Swiper: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä .feedbacks-slider –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.");return}new O(e,{slidesPerView:1,spaceBetween:24,watchOverflow:!0,navigation:{nextEl:".feedbacks-arrows .swiper-button-next",prevEl:".feedbacks-arrows .swiper-button-prev"},pagination:{el:".feedbacks .carousel-navigation .feedbacks-pagination",clickable:!0},a11y:{enabled:!0},keyboard:{enabled:!0},mousewheel:{enabled:!0,forceToAxis:!0},breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}})});const P=new O(".heroSwiper",{spaceBetween:2,slidesPerView:1,speed:1e3,keyboard:{enabled:!0},autoplay:{delay:5e3,disableOnInteraction:!1},on:{init:()=>{document.querySelector(".heroSwiper").style.visibility="visible"}}}),I=document.querySelector(".button-next"),$=document.querySelector(".button-prev");function pe(){P.isBeginning?($.disabled=!0,$.classList.add("disabled")):($.disabled=!1,$.classList.remove("disabled")),P.isEnd?(I.disabled=!0,I.classList.add("disabled")):(I.disabled=!1,I.classList.remove("disabled"))}pe();P.on("slideChange",pe);I.addEventListener("click",()=>{P.slideNext()});$.addEventListener("click",()=>{P.slidePrev()});const ve="https://books-backend.p.goit.global",$e=1e4,W=3,Te=1e3,E={initialPerPageMobile:10,initialPerPageDesktop:24,perLoadMoreDesktop:4,perLoadMoreMobile:4,mobileBreakpoint:768,tabletBreakpoint:1024},j={maxSize:50,ttl:5*60*1e3},J=["Hardcover Fiction","Hardcover Nonfiction","Trade Fiction Paperback","Mass Market Monthly","Paperback Trade Fiction","Paperback Nonfiction","E-Book Fiction","E-Book Nonfiction","Hardcover Advice","Paperback Advice","Advice How-To and Miscellaneous","Children's Middle Grade Hardcover","Picture Books","Series Books","Young Adult Hardcover","Audio Fiction","Audio Nonfiction","Business Books","Graphic Books and Manga","Mass Market","Middle Grade Paperback","Young Adult Paperback"],v={booksGrid:"books-grid",booksLoader:"books-loader",showMoreBtn:"show-more-btn",categoriesList:"categories-list",categoriesLoader:"categories-loader",booksError:"books-error",booksCounter:"books-counter-text",categoriesSelectTablet:"categories-select-tablet",categoriesSelectMobile:"categories-select-mobile"},xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},Q={EMAILS:"emails"},U=3e3,S={REQUIRED:"* Required field",INVALID:"Please enter a valid email",SUCCESS:"Email saved!"},T="cart";async function X(e,t={}){const o=new AbortController,s=setTimeout(()=>o.abort(),$e);let r=null;for(let n=1;n<=W;n++)try{const a=await fetch(`${ve}${e}`,{signal:o.signal,headers:{"Content-Type":"application/json",Accept:"application/json"},...t});if(clearTimeout(s),!a.ok){const m=await a.text().catch(()=>"");throw new Error(`API ${a.status}: ${a.statusText}. ${m}`)}return await a.json()}catch(a){if(r=a,a.name==="AbortError")throw new Error("Request timeout. Please check your connection.");if(n===W)throw r;await new Promise(m=>setTimeout(m,Te*n))}}function Z(e,t=""){return{id:e._id||"no-id",title:e.title||"Untitled",author:e.author||"Unknown Author",image:e.book_image||t,amazon_product_url:e.amazon_product_url||"#",price:e.price||""}}class qe{constructor(t=j.maxSize,o=j.ttl){this.cache=new Map,this.maxSize=t,this.ttl=o}set(t,o){if(this.cache.size>=this.maxSize){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(t,{value:o,ts:Date.now()})}get(t){const o=this.cache.get(t);return o?Date.now()-o.ts>this.ttl?(this.cache.delete(t),null):o.value:null}clear(){this.cache.clear()}}class Pe{constructor(){this.cache=new qe}async getCategories(){const t="categories",o=this.cache.get(t);if(o)return o;try{const s=await X("/books/category-list");let r=[];s&&Array.isArray(s.results)&&(r=s.results.map(a=>typeof a=="object"&&a.list_name?{name:a.list_name,value:a.list_name}:typeof a=="string"?{name:a,value:a}:null).filter(Boolean)),r.length||(r=J.map(a=>({name:a,value:a})));const n=[{name:"All Categories",value:"all"},...r];return this.cache.set(t,n),n}catch{return[{name:"All Categories",value:"all"},...J.map(s=>({name:s,value:s}))]}}async getBooks(t="all",o=1,s){var a;s||(s=window.innerWidth<=768?10:24);const r=`books_${t}_${o}_${s}`,n=this.cache.get(r);if(n)return n;try{let m="/books/top-books";t!=="all"&&(m=`/books/category?category=${encodeURIComponent(t)}`);const c=await X(m),l=[],y=new Set;t==="all"?Array.isArray(c)&&c.forEach(p=>{Array.isArray(p.books)&&p.books.forEach(g=>{const u=Z(g),L=`${u.title}__${u.image}`;y.has(L)||(y.add(L),l.push(u))})}):((a=c==null?void 0:c.results)!=null&&a.length?c.results:Array.isArray(c)?c:[]).forEach(g=>{const u=Z(g),L=`${u.title}__${u.image}`;y.has(L)||(y.add(L),l.push(u))}),l.length||console.log(`–£ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó "${t}" –Ω–µ–º–∞—î –∫–Ω–∏–≥.`);const B=(o-1)*s,d=B+s,b={books:l.slice(B,d),total:l.length,showing:Math.min(d,l.length),hasMore:d<l.length,currentPage:o};return this.cache.set(r,b),b}catch(m){throw new Error(`Failed to load books: ${m.message}`)}}}const ee=new Pe,Oe=async e=>{try{const{data:t}=await Ae.get(`${ve}/books/${e}`);return t}catch(t){throw new Error(`Failed to load books: ${t.message}`)}},i={elBookModal:document.querySelector("#book-modal"),elModalContent:document.querySelector(".modal-book-container"),elBtnOpenModal:document.getElementById("open-modal-btn"),footerForm:document.querySelector(".footer-input-box"),footerInput:document.querySelector(".footer-input"),footerRemark:document.querySelector(".footer-remark"),footerBtn:document.querySelector(".footer-btn"),elModalCloseBtn:document.querySelector(".modal-close-btn")};function Re(e){const t=JSON.parse(localStorage.getItem(Q.EMAILS))||[];t.includes(e)||(t.push(e),localStorage.setItem(Q.EMAILS,JSON.stringify(t)))}const te=(e,t)=>localStorage.setItem(e,JSON.stringify(t)),ye=e=>JSON.parse(localStorage.getItem(e))||[],_e=e=>localStorage.removeItem(e);function Ne(e){return ye(T).some(o=>o.id===e)}function ke(e,t){Ne(t)?(e.textContent="Remove from Cart",e.dataset.action="remove-from-cart"):(e.textContent="Add to Cart",e.dataset.action="add-to-cart")}function De(e){const t=e.closest(".quantity-control"),o=t.querySelector(".quantity-input");let s=parseInt(o.value);const r=parseInt(o.min)||1,n=parseInt(o.max)||99;e.classList.contains("increase-btn")&&s<n?o.value=s+1:e.classList.contains("decrease-btn")&&s>r&&(o.value=s-1),t.querySelector(".decrease-btn").disabled=parseInt(o.value)<=r}function Fe(e,t){var y,B;const o=e.dataset.action,s=i.elModalContent.querySelector(".quantity-input"),r=parseInt(s.value)||1,n=Number(t.price)||0;if(n<=0)return we(`"${t.title}" isn't available right now.<br>Check back soon ‚Äî we'll restock it ASAP!`);const a=t._id,m=r*n;let c=ye(T);const l=c.findIndex(d=>d.id===a);if(o==="add-to-cart"){l!==-1&&c.splice(l,1);const d={id:a,quantity:r,price:n,title:t.title};c.push(d),te(T,c),e.textContent="Remove from Cart",e.dataset.action="remove-from-cart";const b=c.reduce((g,u)=>g+(Number(u.quantity)||0),0),p=c.reduce((g,u)=>g+(Number(u.quantity)||0)*(Number(u.price)||0),0);oe(`‚úÖ You added <b>${r}</b> copies of "<b>${t.title}</b>" to your cart for <b>$${m.toFixed(2)}</b>.<br><br>
   üõí Cart total: <b>${b}</b> items worth <b>$${p.toFixed(2)}</b>.`)}else if(o==="remove-from-cart"){const d=c.filter(p=>p.id!==a);te(T,d),e.textContent="Add to Cart",e.dataset.action="add-to-cart",s.value=1;const b=(y=e.closest(".modal-book-layout"))==null?void 0:y.querySelector(".quantity-control");b&&(b.querySelector(".decrease-btn").disabled=!0),oe(`üóëÔ∏è Book <b>"${t.title}"</b> has been removed from your cart.`)}else if(o==="buy-now"){let d=[];const b={id:a,quantity:r,price:n,title:t.title};l!==-1?(c.splice(l,1,b),d=c):d=[...c,b];const p=new Set(d.map(M=>M.id)).size,g=d.reduce((M,_)=>M+(Number(_.quantity)||0),0),u=d.reduce((M,_)=>M+(Number(_.quantity)||0)*(Number(_.price)||0),0);Ue(`üéâ You've successfully purchased <b>${p}</b> unique titles (<b>${g}</b> ${g===1?"book":"books"} total) for <b>$${u.toFixed(2)}</b>. Thank you for your purchase!`),_e(T);const Y=(B=e.closest(".modal-book-actions"))==null?void 0:B.querySelector(".add-to-cart-btn");Y&&ke(Y,a),s.value=1}}function we(e){return R.error({title:"üòî Oops!",message:e,position:"topRight",timeout:5e3,backgroundColor:"#ffcccc",titleColor:"#000",messageColor:"#000",maxWidth:480})}function oe(e){return R.info({title:"üõí Cart Updated",message:e,position:"topRight",timeout:5e3,backgroundColor:"#d9ecff",titleColor:"#000",messageColor:"#000",maxWidth:480})}function Ue(e){return R.success({title:"üéâ Purchase Successful!",message:e,position:"topRight",timeout:5e3,backgroundColor:"#8a2be2",titleColor:"#fff",messageColor:"#fff",maxWidth:480})}function He(e,t){return R.success({title:"üéâ Registration Successful!",message:`Thank you for registering, ${e}! We will contact you at ${t}.`,position:"topRight",timeout:5e3,backgroundColor:"#28a745",titleColor:"#fff",messageColor:"#fff",maxWidth:480})}function f(e){return e?String(e).replace(/[&<>"']/g,t=>xe[t]):""}function Le(e,t=0){const o=document.createElement("li");o.className="book-card",o.style.animationDelay=`${t%8*.05+.1}s`;const s=e.price&&e.price!=="$0"?e.price:"";return o.innerHTML=`
    <div class="book-media">
      <img
        class="book-cover loading"
        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='227' height='323'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3C/svg%3E"
        ${e.image?`data-src="${e.image}"`:""}
        alt="${f(e.title)}"
        loading="lazy"
      >
    </div>
    <div class="book-info">
        <h3 class="book-title">${f(e.title)}</h3>
        <p class="book-author">${f(e.author)}</p>
        ${s?`<span class="book-price">${f(s)}</span>`:""}
    </div>
    <div class="book-footer">
      <button
        class="learn-more-btn"
        type="button"
        data-book-id="${f(e.id)}"
        data-amazon-url="${f(e.amazon_product_url)}"
      >
        Learn More
      </button>
    </div>
  `,o}function ze(e,t,o){return`
    <li class="category-item ${o?"active":""}" data-category="${f(t)}">
      <button class="category-button" type="button" data-category="${f(t)}">
        ${f(e)}
      </button>
    </li>
  `}function Ge(e,t,o="all"){e&&(e.innerHTML=t.map(s=>ze(s.name,s.value,s.value===o)).join(""))}function Ke(e,t,o="all"){e.forEach(s=>{s&&(s.innerHTML=t.map(r=>`<option value="${f(r.value)}" ${r.value===o?"selected":""}>
          ${f(r.name)}
        </option>`).join(""))})}function Ve(e,t){if(e){if(e.innerHTML="",!t||t.length===0){we("Unfortunately, there are no books in this category right now");return}t.forEach((o,s)=>{const r=Le(o,s);e.appendChild(r)})}}function Ye(e,t){if(!e||!(t!=null&&t.length))return;const o=e.children.length;t.forEach((s,r)=>{const n=Le(s,o+r);e.appendChild(n)})}function We(e,t,o){e&&(e.textContent=`Showing ${t} of ${o}`)}function je(e,t,o){if(!e)return;const s=e.querySelector(".button-text");s&&(o?(s.textContent="Loading...",e.disabled=!0):t?(s.textContent="Show More",e.disabled=!1,e.style.display="block"):e.style.display="none")}function se(e,t){if(!e)return;const o=e.querySelector(".error-message");o&&(o.textContent=t),e.style.display="block"}function re(e){e&&(e.style.display="none")}function Je(e,t,o){e==null||e.classList.toggle("hidden",!o),t==null||t.setAttribute("aria-busy",String(o))}function ne(e,t){e==null||e.classList.toggle("hidden",!t)}function Qe(e,t){e&&e.querySelectorAll(".category-item").forEach(o=>{o.classList.toggle("active",o.dataset.category===t)})}function Xe(e){const t=document.createElement("div");t.className="modal-book-layout";const o=e.price&&e.price!=="0.00"?e.price:"0.00",s=e.description&&e.description.trim()!==""?e.description:null,r=e.publisher?`<br>Publisher: <b>${e.publisher}</b>.`:null,n=e.weeks_on_list,a=n===1?"week":"weeks",m=e.rank&&e.rank>0&&n&&n>0?`<br>This book is ranked <b>#${e.rank}</b> on the bestseller list, having been on it for <b>${n}</b> ${a}.`:null;let c=s||"";if(s){let l="";r&&(l+=r),m&&(l+=m),l&&(c+=l)}return c||(c="No description available for this book."),t.innerHTML=`
        <img
            class="book-cover-img"
            src="${e.book_image||""}"
            alt="Book cover for '${e.title}' by ${e.author}"
            width="309"
            height="467"
            loading="lazy"
        />

        <div class="mobile-content">
            <div class="section-header">
                <h2 class="book-title-mobile">${e.title}</h2>
                <p class="book-author">${e.author}</p>
                <p class="price-mobile">$${o}</p>
            </div>

            <div class="quantity-control" data-item-id="${e._id}">
                <button type="button" class="decrease-btn" aria-label="Decrease quantity" disabled>-</button>
                <input type="number" class="quantity-input" value="1" min="1" max="99" aria-label="Book quantity"/>
                <button type="button" class="increase-btn" aria-label="Increase quantity">+</button>
            </div>

            <div class="modal-book-actions">
                <button class="btn add-to-cart-btn" type="button" data-action="add-to-cart">Add to Cart</button>
                <button class="btn buy-now-btn btn-secondary" type="button" data-action="buy-now">Buy Now</button>
            </div>

            <div class="accordion-container">
                <div class="ac">
                    <div class="ac-header">
                        <h4 class="ac-title">Details</h4>
                        <svg class="ac-icon arrow-down" width="24" height="25">
                            <use href="./assets/symbol-defs.svg#icon-chevron-down" />
                        </svg>
                        <svg class="ac-icon arrow-up" width="24" height="25">
                            <use href="./assets/symbol-defs.svg#icon-chevron-up" />
                        </svg>
                    </div>
                    <div class="ac-panel">
                        <p class="ac-text">${c}</p>
                    </div>
                </div>

                <div class="ac">
                    <div class="ac-header">
                        <h4 class="ac-title">Shipping</h4>
                        <svg class="ac-icon arrow-down" width="24" height="25">
                            <use href="./assets/symbol-defs.svg#icon-chevron-down" />
                        </svg>
                        <svg class="ac-icon arrow-up" width="24" height="25">
                            <use href="./assets/symbol-defs.svg#icon-chevron-up" />
                        </svg>
                    </div>
                    <div class="ac-panel">
                        <p class="ac-text">
                            We ship across the United States within 2-6 business days. All
                            orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.
                        </p>
                    </div>
                </div>

                <div class="ac">
                    <div class="ac-header">
                        <h4 class="ac-title">Returns</h4>
                        <svg class="ac-icon arrow-down" width="24" height="25">
                            <use href="./assets/symbol-defs.svg#icon-chevron-down" />
                        </svg>
                        <svg class="ac-icon arrow-up" width="24" height="25">
                            <use href="./assets/symbol-defs.svg#icon-chevron-up" />
                        </svg>
                    </div>
                    <div class="ac-panel">
                        <p class="ac-text">
                            You can return an item within 14 days of receiving your order,
                            provided it hasn't been used and is in its original condition.
                            To start a return, please contact our support team ‚Äî we'll guide
                            you through the process quickly and hassle-free.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    `,t}let N=null,G=0,D=null;async function Ze(e){if(!e||typeof e!="object")return;D=e,N=document.activeElement;const t=i.elBookModal;G=window.scrollY,document.body.style.top=`-${G}px`,document.body.style.position="fixed",document.body.style.width="100%",document.body.style.overflow="hidden",i.elModalContent.querySelectorAll(".modal-book-layout").forEach(n=>n.remove());const o=Xe(e);i.elModalContent.appendChild(o);const s=t.querySelector(".add-to-cart-btn");s&&ke(s,e._id),t.classList.add("active","is-open"),t.removeAttribute("inert"),t.setAttribute("aria-hidden","false"),i.elModalCloseBtn.focus({preventScroll:!0}),i.elBookModal.addEventListener("click",Se),window.addEventListener("keydown",Ce);const r=Array.from(i.elModalContent.querySelectorAll(".accordion-container"));r.length>0&&new Ie(r,{duration:300,showMultiple:!0,triggerClass:"ac-header"})}function Ee(){const e=i.elBookModal;document.activeElement&&e.contains(document.activeElement)&&document.activeElement.blur(),i.elBookModal.removeEventListener("click",Se),window.removeEventListener("keydown",Ce),e.classList.remove("active","is-open"),e.setAttribute("aria-hidden","true"),e.setAttribute("inert",""),setTimeout(()=>{document.body.style.position="",document.body.style.top="",document.body.style.overflow="",window.scrollTo({top:G,behavior:"instant"}),N&&(N.focus(),N=null),D=null,i.elModalContent.querySelectorAll(".modal-book-layout").forEach(t=>t.remove())},300)}function Se(e){if(e.target.closest(".modal-close-btn")||e.target===i.elBookModal)return Ee();const t=e.target.closest(".decrease-btn")||e.target.closest(".increase-btn");if(t)return De(t);const o=e.target.closest("[data-action]");o&&D&&Fe(o,D)}function Ce(e){if(e.key==="Escape")return Ee()}function et(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function tt(e){return()=>e.loadMore()}function ot(){return async function(t){const o=t.target.closest(".learn-more-btn");if(!o)return;t.preventDefault();const s=o.dataset.bookId;if(!(!s||s==="no-id"))try{const r=await Oe(s);Ze(r)}catch(r){showError(this.elements.errorElement,`Error fetching book: ${r.message}`)}}}function st(e){return()=>{e.debounceTimeout&&clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(()=>{var o;(((o=e.elements.booksGrid)==null?void 0:o.querySelectorAll(".book-card"))??[]).forEach((s,r)=>s.style.animationDelay=`${r%8*.05+.1}s`)},250)}}function ae(e){return t=>e.filterByCategory(t.target.value)}function rt(e){return t=>{const o=t.currentTarget.closest(".category-item"),s=o==null?void 0:o.dataset.category;s&&s!==e.currentCategory&&e.filterByCategory(s)}}function nt(e){return()=>e.loadBooks(!0)}function at(e){return new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting&&e(o.target)})},{rootMargin:"50px 0px"})}function it(e,t){const o=e.dataset.src;if(!o)return;e.classList.add("loading");const s=new Image;s.onload=()=>{e.src=o,e.classList.remove("loading"),e.classList.add("loaded"),delete e.dataset.src,t==null||t.unobserve(e)},s.onerror=()=>{e.classList.remove("loading"),e.classList.add("error"),t==null||t.unobserve(e)},s.src=o}function H(e,t,o){R[e]({title:t,message:o,position:"topRight"})}function ct(e){e.preventDefault();const t=i.footerInput.value.trim();if(i.footerBtn.classList.remove("btn-error","btn-success"),i.footerRemark.classList.remove("remark-error","remark-success"),i.footerInput.classList.remove("error","success"),!t){i.footerRemark.textContent=S.REQUIRED,i.footerRemark.classList.add("remark-error"),i.footerInput.classList.add("error"),H("warning","Caution",S.REQUIRED),setTimeout(z,U);return}if(!et(t)){i.footerRemark.textContent=S.INVALID,i.footerRemark.classList.add("remark-error"),i.footerBtn.classList.add("btn-error"),i.footerInput.classList.add("error"),H("error","Error",S.INVALID),setTimeout(z,U);return}i.footerRemark.textContent="‚úÖ "+S.SUCCESS,i.footerRemark.classList.add("remark-success"),i.footerBtn.classList.add("btn-success"),i.footerInput.classList.add("success"),H("success","OK",S.SUCCESS),Re(t),setTimeout(z,U),i.footerForm.reset()}function z(){i.footerRemark.textContent="",i.footerRemark.classList.remove("remark-error","remark-success"),i.footerBtn.classList.remove("btn-error","btn-success"),i.footerInput.classList.remove("error","success")}function ie(e){return String(e||"").toLowerCase().replace(/&amp;/g,"&").replace(/\s+/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").trim()}function lt(e){const t=ie(e.title),o=ie(e.author);return t||o?`ta:${t}|${o}`:`id:${e.id||"no-id"}`}function dt(e=[]){const t=new Set,o=[];for(const s of e){const r=lt(s);t.has(r)||(t.add(r),o.push(s))}return o}class ut{constructor(){this.elements={booksGrid:document.getElementById(v.booksGrid),booksLoader:document.getElementById(v.booksLoader),showMoreBtn:document.getElementById(v.showMoreBtn),categoriesUL:document.getElementById(v.categoriesList),categoriesLoader:document.getElementById(v.categoriesLoader),errorElement:document.getElementById(v.booksError),booksCounter:document.getElementById(v.booksCounter),categoriesSelectTablet:document.getElementById(v.categoriesSelectTablet),categoriesSelectMobile:document.getElementById(v.categoriesSelectMobile)},this.currentCategory="all",this.currentPage=1,this.isLoading=!1,this.hasMore=!0,this.loadedBooks=[],this.imageObserver=null,this.debounceTimeout=null,this.initialCount=this.getInitialBooksCount(),this.init()}async init(){try{re(this.elements.errorElement),this.setupEventListeners(),this.setupObservers(),await this.renderCategories(),await this.loadBooks(!0)}catch(t){console.error("Books init error:",t),se(this.elements.errorElement,"Failed to load books. Please try again.")}}setupEventListeners(){var t,o,s,r,n,a;(t=this.elements.showMoreBtn)==null||t.addEventListener("click",tt(this)),(o=this.elements.booksGrid)==null||o.addEventListener("click",ot()),window.addEventListener("resize",st(this)),(s=this.elements.categoriesSelectTablet)==null||s.addEventListener("change",ae(this)),(r=this.elements.categoriesSelectMobile)==null||r.addEventListener("change",ae(this)),(a=(n=this.elements.errorElement)==null?void 0:n.querySelector(".retry-btn"))==null||a.addEventListener("click",nt(this))}setupObservers(){"IntersectionObserver"in window&&(this.imageObserver=at(t=>it(t,this.imageObserver)))}async renderCategories(){if(this.elements.categoriesUL){ne(this.elements.categoriesLoader,!0);try{const t=await ee.getCategories();Ge(this.elements.categoriesUL,t,this.currentCategory),this.elements.categoriesUL.querySelectorAll(".category-button").forEach(o=>o.addEventListener("click",rt(this))),Ke([this.elements.categoriesSelectTablet,this.elements.categoriesSelectMobile],t,this.currentCategory)}finally{ne(this.elements.categoriesLoader,!1)}}}async loadBooks(t=!1){if(!this.isLoading){this.setLoading(!0),re(this.elements.errorElement);try{const o=t?this.getInitialBooksCount():window.innerWidth<=E.mobileBreakpoint?E.perLoadMoreMobile:E.perLoadMoreDesktop,s=t?1:this.currentPage+1,r=await ee.getBooks(this.currentCategory,s,o);t?(this.loadedBooks=[...r.books],this.currentPage=1,Ve(this.elements.booksGrid,this.loadedBooks)):(this.loadedBooks.push(...r.books),this.currentPage=s,Ye(this.elements.booksGrid,r.books)),this.setupLazyLoading();const n=typeof r.total=="number"?r.total:dt(this.loadedBooks).length;this.hasMore=!!r.hasMore&&this.loadedBooks.length<n,this.updateShowMoreButton(),We(this.elements.booksCounter,this.loadedBooks.length,n)}catch(o){console.error("Load books error:",o),se(this.elements.errorElement,`Failed to load books: ${o.message}`)}finally{this.setLoading(!1)}}}setupLazyLoading(){var t;this.imageObserver&&((t=this.elements.booksGrid)==null||t.querySelectorAll(".book-cover[data-src]").forEach(o=>this.imageObserver.observe(o)))}async filterByCategory(t){t!==this.currentCategory&&(this.currentCategory=t,this.currentPage=1,this.loadedBooks=[],Qe(this.elements.categoriesUL,t),this.elements.categoriesSelectTablet&&(this.elements.categoriesSelectTablet.value=t),this.elements.categoriesSelectMobile&&(this.elements.categoriesSelectMobile.value=t),await this.loadBooks(!0))}async loadMore(){!this.hasMore||this.isLoading||await this.loadBooks(!1)}updateShowMoreButton(){je(this.elements.showMoreBtn,this.hasMore,this.isLoading)}getInitialBooksCount(){return window.innerWidth<=E.mobileBreakpoint?E.initialPerPageMobile:E.initialPerPageDesktop}setLoading(t){this.isLoading=t,Je(this.elements.booksLoader,this.elements.booksGrid,t),this.updateShowMoreButton()}destroy(){var t;(t=this.imageObserver)==null||t.disconnect(),this.debounceTimeout&&clearTimeout(this.debounceTimeout)}}let A=window.__booksSectionInstance||null;function ce(){return A||(A=new ut,window.__booksSectionInstance=A,A)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>ce(),{once:!0}):ce();const w=document.getElementById("modal"),Be=w.querySelector(".modal-content"),mt=document.getElementById("modal-event-title"),ht=document.querySelectorAll(".open-modal-btn, #open-contact"),ft=w.querySelectorAll(".modal-close-btn"),k=document.querySelector(".register-form");let K=null;const Me=document.documentElement;let x=null,q=null;function bt(e,t){K=t||document.activeElement,w.classList.add("active"),document.body.classList.add("modal-open"),Me.classList.add("modal-open");const o=Be.querySelector("input, textarea, button");o&&o.focus(),x=function(s){s.key==="Escape"&&F(),s.key==="Tab"&&gt(s)},q=function(s){s.target===w&&F()},document.addEventListener("keydown",x),w.addEventListener("click",q)}function F(){w.classList.remove("active"),x&&document.removeEventListener("keydown",x),q&&w.removeEventListener("click",q),document.body.classList.remove("modal-open"),Me.classList.remove("modal-open"),K&&K.focus(),x=null,q=null}ht.forEach(e=>{e.addEventListener("click",t=>{const o=e.dataset.eventTitle;mt.textContent=o,e.getAttribute("data-event-title"),bt(o,e)})});ft.forEach(e=>e.addEventListener("click",F));function gt(e){const t=Be.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');if(!t.length)return;const o=t[0],s=t[t.length-1];e.shiftKey&&document.activeElement===o?(s.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===s&&(o.focus(),e.preventDefault())}k.addEventListener("submit",e=>{if(e.preventDefault(),!k.checkValidity()){const s=k.querySelector(":invalid");s&&s.focus();return}const t=k.name.value,o=k.email.value;console.log("Submitted:",{name:t,email:o,message:k.message.value}),F(),He(`Thank you for registering, ${t}! We will contact you at ${o}.`),k.reset()});O.use([le,de,ue,me,he]);const pt=document.querySelector(".events-slider");new O(pt,{slidesPerView:1,spaceBetween:24,watchOverflow:!0,navigation:{nextEl:".events-section .swiper-button-next",prevEl:".events-section .swiper-button-prev"},pagination:{el:".events-section .swiper-pagination",clickable:!0},a11y:{enabled:!0},keyboard:{enabled:!0},mousewheel:{enabled:!0,forceToAxis:!0},breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}});i.footerForm.addEventListener("submit",ct);const V=document.querySelector(".scroll-top"),vt=document.querySelector(".hero");function yt(e){e.forEach(t=>{t.isIntersecting?V.classList.add("hidden"):V.classList.remove("hidden")})}const kt=new IntersectionObserver(yt);kt.observe(vt);function wt(){window.scrollTo({top:0,behavior:"smooth"})}V.addEventListener("click",wt);
//# sourceMappingURL=index.js.map
